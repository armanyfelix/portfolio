---
import CheckCircleIcon from "@/icons/CheckCircle.svg";
import ErrorCircleIcon from "@/icons/ErrorCircle.svg";
import PaperAirplaneIcon from "@/icons/PaperAirplane.svg";
import GithubIcon from "@/icons/Github.svg";
import LinkedinIcon from "@/icons/Linkedin.svg";
import EmailIcon from "@/icons/Email.svg";
import MapPinIcon from "@/icons/MapPin.svg";

const error: any = null;
const sending = false;

function validateEmail(email: string): boolean {
  const res =
    /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return res.test(String(email).toLowerCase());
}

const onSubmit = async (data: any) => {
  try {
    const response = await fetch("/api/sendmail", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(data),
    });

    // if (response.ok) {
    //   setSended("success");
    // } else {
    //   setSended("error");
    // }
  } catch (_error) {
    // setSended("error");
  }
};

const handleSendEmail = async (e: FormData) => {
  try {
    // setSending(true);
    await onSubmit(e);
    // // await sendEmail(e)
    // setError(false);
    // setSending(false);
  } catch {
    // setError(true);
    // setSending(false);
  }


};
---

<section id="contact" class="antialiased lg:h-screen lg:py-1">
  <div class="flex min-h-screen w-full items-center justify-center">
    <div class="rounded-box mx-3 flex w-full max-w-5xl flex-col justify-between space-y-6 border-opacity-30 bg-base-300 bg-opacity-30 p-6 shadow-lg backdrop-blur backdrop-filter sm:p-10 md:mx-6 md:flex-row md:space-x-4 md:space-y-0 md:p-12 lg:p-16">
      <div class="flex flex-col justify-between antialiased">
        <div>
          <h1 class="text-5xl font-bold tracking-wide text-secondary lg:text-7xl">
            Contact
          </h1>
          <p class="pt-2 text-lg font-bold">
            If you are interested in working with me, please send me a
            email.
            <br />I will answer you as soon as possible.
          </p>
        </div>
        <div class="mt-8 flex flex-col space-y-4 md:mt-0">
          <div class="inline-flex items-center space-x-2">
            <EmailIcon />
            <span>armanyfelix@proton.me</span>
          </div>
          <div class="inline-flex items-center space-x-2">
            <MapPinIcon />
            <span>Tijuana B.C. Mexico</span>
          </div>
        </div>
        <div class="mt-6 flex space-x-4">
          <a href="https://www.linkedin.com/in/armany-felix">
            <LinkedinIcon />
          </a>
          <a href="https://github.com/armanyfelix/">
            <GithubIcon />
          </a>
        </div>
      </div>
      <div>
        <div class="shadow-xl md:w-80">
          <form
            class="flex flex-col space-y-4"
          >
            <fieldset class="fieldset bg-base-100 border-base-300 rounded-box border p-4">
              {/* <legend class="fieldset-legend">Page details</legend> */}
              <label class="label">Name</label>
              <input
                type="text"
                name="name"
                class="input"
                placeholder="Name"
                required
              />

              <label class="label">Email</label>
              <input
                type="email"
                name="email"
                class="input"
                placeholder="Email"
                required
              />

              <label class="label">Message</label>
              <textarea
                name="message"
                class="textarea"
                placeholder="Message"
                rows={4}
                required
              />
            </fieldset>
            <div class="justify-end text-right">
              <button
                type="submit"
                class="btn btn-primary w-full"
              >
                {sending ? (
                  <span class="loading loading-dots loading-lg" />
                ) : (
                  <PaperAirplaneIcon />
                )}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  {error ? (
    <button
      class="alert alert-error fixed left-3 right-3 top-2 z-50 w-full"
    >
      <ErrorCircleIcon />
      <span>
        Error! The mail could not be sent, please try a again later. üò¨
      </span>
    </button>
  ) : (
    error === false && (
      <button
        class="alert alert-success fixed right-1/2 top-24 z-50 w-auto translate-x-1/2"
      >
        <CheckCircleIcon />
        <span>
          The mail was send successfully! I will answer you ASAP. ‚úåÔ∏èüòÅ
        </span>
      </button>
    )
  )}
</section>